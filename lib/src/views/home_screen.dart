import 'dart:convert';import 'package:flutter/material.dart';import 'package:carousel_slider/carousel_slider.dart';import 'package:http/http.dart';import 'package:nearme/src/views/deatil_page.dart';import 'package:nearme/src/views/saved_places.dart';import '../model/city_banner.dart';import '../model/custome_container.dart';import 'package:http/http.dart' as http;class HomeScreen extends StatefulWidget {  const HomeScreen({super.key});  @override  State<HomeScreen> createState() => _HomeScreenState();}class _HomeScreenState extends State<HomeScreen> {  List<String> cityName = ['vadodara', 'ahemdabad', 'salanpur'];  List<CustomContainer> hotels = [];  List<CustomContainer> places = [];  @override  void initState() {    // print('init');    initialize();    super.initState();  }  void initialize() async {    hotels = await hotelsData();    places = await placesData();    setState(() {});    // print('initialize ${hotels.length}');    // print('initialize ${places.length}');  }  Future<List<CustomContainer>> hotelsData() async {    String url = 'https://neartravel.teleferti.com/api/hotels';    Response response = await http.get(Uri.parse(url));    var data = jsonDecode(response.body);    int length = data['hotels'].length;    List<CustomContainer> hotels = [];    for (int i = 0; i < length; i++) {      String imageUrl = data['hotels'][i]['images'][0];      String imageUrl1 = data['hotels'][i]['images'][1];      String title = data['hotels'][i]['name'];      double rating = (data['hotels'][i]['rating']).toDouble();      String info = data['hotels'][i]['details'];      String status = 'Open';      String address = data['hotels'][i]['address'];      String city = data['hotels'][i]['city'];      hotels.add(CustomContainer(        city:  city,        imageUrl: imageUrl,        title: title,        rating: rating,        info: info,        status: status,        address: address,        imageUrl1: imageUrl1,      ));    }    // print('function ${hotels.length}');    return hotels;  }  Future<List<CustomContainer>> placesData() async {    String url = 'https://neartravel.teleferti.com/api/places';    Response response = await http.get(Uri.parse(url));    var data = jsonDecode(response.body);    int length = data['places'].length;    List<CustomContainer> places = [];    for (int i = 0; i < length; i++) {      String imageUrl = data['places'][i]['images'][0];      String imageUrl1 = data['places'][i]['images'][1];      String title = data['places'][i]['name'];      double rating = (data['places'][i]['rating']).toDouble();      String info = data['places'][i]['details'];      String status = 'Open';      String address = data['places'][i]['address'];      String city = data['places'][i]['city'];      places.add(CustomContainer(        imageUrl: imageUrl,        title: title,        rating: rating,        info: info,        status: status,        address: address,        imageUrl1: imageUrl1,        city: city,      ));    }    // print('function ${places.length}');    return places;  }  @override  Widget build(BuildContext context) {    // print(places.length);    // print(hotels.length);    return Scaffold(      extendBody: true,      body: hotels.isEmpty || places.isEmpty          ? const Center(              child: CircularProgressIndicator(              color: Color.fromRGBO(54, 122, 255, 1),            ))          : SingleChildScrollView(              scrollDirection: Axis.vertical,              physics: const BouncingScrollPhysics(),              child: Column(                crossAxisAlignment: CrossAxisAlignment.start,                children: [                  const SizedBox(                    height: 15,                  ),                  CarouselSlider(                    items: [                      CityBanner(                        image: Image.asset(                          'Assets/banner/city_banner1.png',                          fit: BoxFit.cover,                        ),                        borderRadius: 20,                      ),                      CityBanner(                        image: Image.asset(                          'Assets/banner/city_banner2.png',                          fit: BoxFit.cover,                        ),                        borderRadius: 20,                      ),                      CityBanner(                        image: Image.asset(                          'Assets/banner/city_banner3.png',                          fit: BoxFit.cover,                        ),                        borderRadius: 20,                      ),                      CityBanner(                        image: Image.asset(                          'Assets/banner/city_banner4.png',                          fit: BoxFit.cover,                        ),                        borderRadius: 20,                      ),                    ],                    options: CarouselOptions(viewportFraction: 0.92),                  ),                  const SizedBox(                    height: 25,                  ),                  const Padding(                    padding: EdgeInsets.only(top: 8.0, left: 8, right: 8),                    child: Text(                      'City',                      style: TextStyle(                        fontWeight: FontWeight.bold,                        fontSize: 25,                      ),                    ),                  ),                  SingleChildScrollView(                      physics: const BouncingScrollPhysics(),                      scrollDirection: Axis.horizontal,                      child: Row(                        children: [                          for (String s in cityName)                            GestureDetector(                              onTap: () {                                Navigator.of(context).push(MaterialPageRoute(                                    builder: (ctx) => const SavedScreen()));                              },                              child: Container(                                height: 100,                                width: 100,                                padding:                                    const EdgeInsets.only(left: 8.0, bottom: 8),                                decoration: BoxDecoration(                                  borderRadius: BorderRadius.circular(20),                                  // color: Colors.transparent                                ),                                child: ClipRRect(                                  borderRadius: BorderRadius.circular(20),                                  child: Image.asset(                                    'Assets/city/$s.png',                                  ),                                ),                              ),                            )                        ],                      )),                  const Padding(                    padding: EdgeInsets.only(top: 8.0, left: 8, right: 8),                    child: Text(                      'Famous Places',                      style: TextStyle(                        fontWeight: FontWeight.bold,                        fontSize: 20,                      ),                    ),                  ),                  SizedBox(                    height: MediaQuery.of(context).size.height * 0.35,                    child: ListView.builder(                      itemCount: places.length,                      itemBuilder: (context, index) => GestureDetector(                          onTap: () {                            Navigator.of(context).push(MaterialPageRoute(                                builder: (ctx) =>                                    DetailPage(c: places[index])));                          },                          child: places[index]),                      scrollDirection: Axis.horizontal,                      physics: const BouncingScrollPhysics(),                      shrinkWrap: true,                    ),                  ),                  const Padding(                    padding: EdgeInsets.only(top: 8.0, left: 8, right: 8),                    child: Text(                      'Hotel',                      style: TextStyle(                        fontWeight: FontWeight.bold,                        fontSize: 28,                      ),                    ),                  ),                  SizedBox(                    height: MediaQuery.of(context).size.height * 0.35,                    child: ListView.builder(                      itemCount: hotels.length,                      itemBuilder: (context, index) => GestureDetector(                          onTap: (){                            Navigator.of(context).push(MaterialPageRoute(                                builder: (ctx) =>                                    GestureDetector(                                        onTap: () {                                          Navigator.of(context).push(MaterialPageRoute(                                              builder: (ctx) =>                                                  DetailPage(c: hotels[index])));                                        },                                        child: DetailPage(c: hotels[index]))));                          },                          child: hotels[index]),                      scrollDirection: Axis.horizontal,                      physics: const BouncingScrollPhysics(),                      shrinkWrap: true,                    ),                  ),                  const SizedBox(                    height: 100,                  ),                ],              ),            ),    );  }}